# 자바 8,9,10,11: 무슨 일이 일어나고 있는가?

---
## 1.1 역사의 흐름은 무엇인가?
자바 역사를 통틀어 가장 큰 변화가 자바 8에서 일어났다.

```java
/* 사과 목록을 무게순으로 정렬하는 코드*/
// java 8 이전
Collections.sort(inventory, new Comparator<Apple>() {
	public int compare(Apple a1, Apple a2) {
		return a1.getWeight().compareTo(a2.getWeight());
	}
});

// java 8 이후
inventory.sort(comparing(Apple::getWeight));
```

자바8이 나오기 전 대부분의 자바 프로그램은 멀티코어 중 하나의 코어만을 사용했다.
<br>또다른 코어를 활용하려면 스레드 사용이 권장되었지만 스레드를 사용하면 관리하기 어렵고 많은 문제가 발생할 수 있었다.
<br>

자바는 병렬 실행 환경을 쉽게 관리하고 에러가 덜 발생하는 방향으로 진화하려 노력했다.
- 자바1.0의 스레드와 락, 메모리 모델
- 자바5의 스레드 풀, 병렬실행 컬렉션
- 자바7의 포크/조인 프레임워크

여러 방법을 시도했지만 개발자가 활용하기는 쉽지 않았다.

 자바8은 간결한 코드, 멀티코어 프로세서의 쉬운 활용이라는 두 가지 요구사항을 기반으로 새로운 기술을 제공한다.
> <자바 8에서 제공하는 새로운 기술 > <br>1. 스트림 API <br>2. 메서드에 코드를 전달하는 기법(메서드 참조와 람다)<br>3. 인터페이스의 디폴트 메서드

## 1.2 왜 아직도 자바는 변화하는가?

자바는 객체 지향 패러다임에 적합하고 스레드와 락을 이용한 동시성 지원 등 유용한 라이브러리를 포함하며 JVM 바이트코드로 컴파일한다는 특징을 가지고 있어 커다란 생태계를 성공적으로 구축할 수 있었다.<br>
하지만 프로그래머가 빅데이터라는 도전에 직면하면서 멀티코어 컴퓨터나 컴퓨팅 클러스터를 이용해서 빅데이터를 효과적으로 처리할 필요성이 커졌고 병렬 프로세싱을 활용해야 하는 데 지금까지의 자바로는 충분히 대응할 수 없었다.

<br>
자바 8에서는 병렬성을 활용하는 코드, 간결한 코드를 구현할수 있도록 여러 기능을 제공하는데 지금부터 자바8 설계의 밑바탕이 되는 프로그래밍 개념을 소개하고자 한다.

### 자바 8 설계의 밑바탕
#### 1. 스트림 처리
스트림이란 한 번에 한 개씩 만들어지는 연속적인 데이터 항목들의 모임이다.  이론적으로 프로그램은 입력 스트림에서 데이터를 하나씩 읽어들이며 마찬가지로 출력 스트림으로 데이터를 한 개씩 기록한다.

즉, 어떤 프로그램의 출력 스트림은 다른 프로그램의 입력 스트림이다.
자바 8에는 java.util.stream 패키지에 스트림 API가 추가 되었다. 스트림 패키지에 정의된 Stream는 T형식으로 구성된 일련의 항목을 의미한다.
> 스레드라는 복잡한 작업을 사용하지 않으면서 공짜로 병렬성을 얻을 수 있다.

#### 2. 동작 파라미터화로 메서드에 코드 전달하기
자바8에서 추가된 동작 파라미터화를 통해 코드 일부를 API로 전달하는 기능이 가능해졌다.
말 그대로 메서드를 다른 메서드의 인수로 넘겨주는 기능이다.
#### 3. 병렬성과 공유 가변 데이터
보통 다른 코드와 동시에 실행하더라도 안전하게 실행할 수 있는 코드를 만들려면 공유된 가변 데이터(shared mutable data)에 접근하지 않아야 한다. 하지만 공유된 변수나 객체가 있으면 병렬성에 문제가 발생한다. synchronized를 이용해서 보호하는 규칙을 만들 수 있지만 자바8 스트림을 이용하면 기존의 자바 스레드 API보다 쉽게 병렬성을 활용할 수 있다.
